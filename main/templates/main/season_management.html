{% extends "restricted-content-100.html" %}
{% block Content-100 %}
<h2>Season Management</h2>

<!-- Buttons for CRUD operations -->
<a href="{% url 'create_season' %}" class="btn btn-primary">Create Season</a>
<hr>
<form method="post" action="{% url 'season_action' %}">
    {% csrf_token %}
    <div class="form-group">
        <label for="seasonSelect">Select Season:</label>
        <select id="seasonSelect" name="season_id" class="form-control" onchange="updateSeasonName()">
            {% for season in seasons %}
            <option value="{{ season.id }}" data-name="{{ season.name }}" {% if season.is_current %}selected{% endif %}>
                {{ season.name }}{% if season.is_current %} (current){% endif %}
            </option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <button type="submit" name="action" value="set_current" class="btn btn-success">Set as Current</button>
        <button type="submit" name="action" value="delete" class="btn btn-danger">Delete</button>
        <input type="text" id="seasonName" name="season_name" class="form-control d-inline-block" style="width: auto; display: inline-block; vertical-align: middle;">
        <button type="submit" name="action" value="rename" class="btn btn-warning">Rename</button>
    </div>
</form>

<script>
    function updateSeasonName() {
        var select = document.getElementById('seasonSelect');
        var selectedOption = select.options[select.selectedIndex];
        var seasonName = selectedOption.getAttribute('data-name');
        document.getElementById('seasonName').value = seasonName;
    }

    // Initialize the text field with the name of the initially selected season
    document.addEventListener('DOMContentLoaded', function() {
        updateSeasonName();
    });
</script>
{% endblock %}
